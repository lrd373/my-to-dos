(()=>{"use strict";const t=(t,e)=>{let n="";return t&&(n+=t.charAt(0)),e&&(n+=e.charAt(0)),n+=Math.ceil(1e4*Math.random())*Math.ceil(1e4*Math.random()),n},e=(()=>{let e=[],n={id:t("m"),name:"My To-Dos",list:[]};const l=t=>e.find((e=>e.id==t));return{getProject:l,getProjects:()=>e,addProject:n=>{let o={id:t(n),name:n,list:[]};e.push(o),i()},deleteProject:t=>{let n=e.findIndex((e=>e.id==t));e.splice(n,1)},getCurrentProject:()=>n,setCurrentProject:t=>{n=l(t),console.log("Current project is now:"),console.log(n),d(n.name),i(),o()}}})(),n=(()=>{const n=()=>e.getCurrentProject().list;return{addToList:(i,d,l,r)=>{let c=((e,n,i,o)=>({itemId:t(e,n),itemTitle:e,itemDescription:n,itemDueDate:i,itemPriority:o}))(i,d,l,r);n().push(c),console.log("Updated project"),console.log(e.getCurrentProject()),o()},removeFromList:t=>{let e=_list.findIndex((e=>e.itemId==t));-1!==e&&n().splice(e,1),console.log(_list),o()},getList:n}})(),i=()=>{const t=document.querySelector("header");let n=document.querySelector("#project-button-container");if(n)for(;n.firstChild;)n.removeChild(n.firstChild);else n=document.createElement("div"),n.setAttribute("id","project-button-container");e.getProjects().forEach((t=>{t!=e.getCurrentProject()&&(t=>{let i=document.createElement("button");i.classList.add("project-button"),i.setAttribute("type","button"),i.textContent=t.name,i.addEventListener("click",(()=>{e.setCurrentProject(t.id)})),n.appendChild(i)})(t)})),t.appendChild(n)},o=()=>{const t=document.querySelector("#content");let e=document.querySelector("#list-container");if(e)for(;e.firstChild;)console.log("tried to empty list"),e.removeChild(e.firstChild);else e=document.createElement("div");e.setAttribute("id","list-container");let i=n.getList();console.log("What display thinks is current list:"),console.log(i),i.forEach((t=>{e.appendChild((t=>{let e=t.itemId,i=t.itemTitle,o=t.itemDescription,d=t.itemDueDate,l=t.itemPriority,r=document.createElement("div");r.classList.add("list-item-container"),r.setAttribute("id",e);let c=document.createElement("button");c.classList.add("remove-item-button"),c.textContent="x",c.addEventListener("click",(()=>{n.removeFromList(e)}));let a=document.createElement("div");a.classList.add("item-text-div");let u=document.createElement("h3");u.classList.add("list-item-title"),u.textContent=i;let s=document.createElement("p");s.classList.add("list-item-description"),s.textContent=o,a.appendChild(u),a.appendChild(s);let m=document.createElement("p");m.classList.add("list-item-duedate"),m.textContent=d;let p=document.createElement("p");return p.classList.add("list-item-priority"),p.textContent=`Priority: ${l}`,r.appendChild(c),r.appendChild(a),r.appendChild(m),r.appendChild(p),r})(t))})),t.appendChild(e)},d=t=>{document.querySelector("h1").textContent=t},l=(()=>{const t=document.querySelector("#content");let e=document.createElement("div");e.setAttribute("id","form-container");const i=()=>{e.style.display="none"};return{generateForm:()=>{let o=document.createElement("form"),d=document.createElement("button");d.setAttribute("id","form-exit-button"),d.textContent="x",d.addEventListener("click",i),o.appendChild(d);let r=document.createElement("label");r.setAttribute("for","title-input"),r.textContent="Title";let c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","title-input"),o.appendChild(r),o.appendChild(c);let a=document.createElement("label");a.setAttribute("for","description-input"),a.textContent="Description";let u=document.createElement("textarea");u.setAttribute("id","description-input"),o.appendChild(a),o.appendChild(u);let s=document.createElement("label");s.setAttribute("for","due-date"),s.textContent="Due Date";let m=document.createElement("input");m.setAttribute("id","due-date"),m.setAttribute("type","date"),o.appendChild(s),o.appendChild(m);let p=document.createElement("label");p.setAttribute("for","priority"),p.setAttribute("id","priority-label"),p.textContent="Priority";let C=document.createElement("select");C.setAttribute("id","priority"),C.setAttribute("name","priority");let h=document.createElement("option");h.setAttribute("value","high"),h.textContent="High";let b=document.createElement("option");b.setAttribute("value","medium"),b.textContent="Medium";let E=document.createElement("option");E.setAttribute("value","low"),E.textContent="Low",C.appendChild(h),C.appendChild(b),C.appendChild(E),o.appendChild(p),o.appendChild(C);let y=document.createElement("button");y.setAttribute("type","button"),y.textContent="Add to list",y.addEventListener("click",(()=>{n.addToList(c.value,u.value,m.value,C.value),l.closeForm()})),o.appendChild(y),e.appendChild(o),t.appendChild(e)},launchForm:()=>{e.style.display="block"},closeForm:i}})(),r=(()=>{const t=document.querySelector("#content");let n=document.createElement("div");n.setAttribute("id","project-form-container");const i=()=>{n.style.display="none"};return{generateForm:()=>{let o=document.createElement("form"),d=document.createElement("button");d.setAttribute("id","form-exit-button"),d.textContent="x",d.addEventListener("click",i),o.appendChild(d);let l=document.createElement("label");l.setAttribute("for","name-input"),l.textContent="Project Name";let c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("id","name-input"),o.appendChild(l),o.appendChild(c);let a=document.createElement("button");a.setAttribute("type","button"),a.textContent="Create project",a.addEventListener("click",(()=>{e.addProject(c.value),console.log(e.getProjects()),r.closeForm()})),o.appendChild(a),n.appendChild(o),t.appendChild(n)},launchForm:()=>{n.style.display="block"},closeForm:i}})(),c=document.querySelector("#content");(()=>{l.generateForm();let t=document.createElement("header"),e=document.createElement("div");e.setAttribute("id","header-container");let n=document.createElement("h1");n.textContent="My To-Dos",e.appendChild(n);let i=document.createElement("button");i.setAttribute("id","add-button"),i.textContent="+",i.addEventListener("click",(()=>{l.launchForm()})),e.appendChild(i),t.appendChild(e),r.generateForm();let o=document.createElement("button");o.setAttribute("id","add-project-button"),o.textContent="+",o.addEventListener("click",(()=>{r.launchForm()})),t.appendChild(o),c.appendChild(t)})(),i(),o()})();