(()=>{"use strict";const t=(t,e)=>{let n="";return t&&(n+=t.charAt(0)),e&&(n+=e.charAt(0)),n+=Math.ceil(1e4*Math.random())*Math.ceil(1e4*Math.random()),n},e=(()=>{let e=[];return{getProject:t=>e.find((e=>e.id==t)),getProjects:()=>e,addProject:n=>{let i={id:t(n),name:n,list:[]};e.push(i),o()},deleteProject:t=>{let n=e.findIndex((e=>e.id==t));e.splice(n,1)},setCurrentProject:()=>{}}})(),n=(()=>{const e=t=>{var e;try{e=window[t];var n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}};let n=[];e("localStorage")&&localStorage.getItem("_list")?(console.log("Local storage available"),n=JSON.parse(localStorage.getItem("_list")),console.log("After get"),console.log(n)):console.log("No local storage available");const o=()=>{console.log("trying to set local storage"),e("localStorage")&&localStorage.setItem("_list",JSON.stringify(n))};return{addToList:(e,l,d,r)=>{let a=((e,n,o,i)=>({itemId:t(e,n),itemTitle:e,itemDescription:n,itemDueDate:o,itemPriority:i}))(e,l,d,r);n.push(a),o(),i()},removeFromList:t=>{console.log("remove triggered");let e=n.findIndex((e=>e.itemId==t));-1!==e&&n.splice(e,1),console.log(n),o(),i()},getList:()=>n}})(),o=()=>{const t=document.querySelector("header");let n=document.querySelector("#project-button-container");if(n)for(;n.firstChild;)n.removeChild(n.firstChild);else n=document.createElement("div"),n.setAttribute("id","project-button-container");e.getProjects().forEach((t=>{(t=>{let e=document.createElement("button");e.classList.add("project-button"),e.setAttribute("type","button"),e.textContent=t.name,n.appendChild(e)})(t)})),t.appendChild(n)},i=()=>{const t=document.querySelector("#content");let e=document.querySelector("#list-container");if(e)for(;e.firstChild;)e.removeChild(e.firstChild);else e=document.createElement("div");e.setAttribute("id","list-container"),n.getList().forEach((t=>{e.appendChild((t=>{let e=t.itemId,o=t.itemTitle,i=t.itemDescription,l=t.itemDueDate,d=t.itemPriority,r=document.createElement("div");r.classList.add("list-item-container"),r.setAttribute("id",e);let a=document.createElement("button");a.classList.add("remove-item-button"),a.textContent="x",a.addEventListener("click",(()=>{n.removeFromList(e)}));let c=document.createElement("div");c.classList.add("item-text-div");let s=document.createElement("h3");s.classList.add("list-item-title"),s.textContent=o;let m=document.createElement("p");m.classList.add("list-item-description"),m.textContent=i,c.appendChild(s),c.appendChild(m);let u=document.createElement("p");u.classList.add("list-item-duedate"),u.textContent=l;let p=document.createElement("p");return p.classList.add("list-item-priority"),p.textContent=`Priority: ${d}`,r.appendChild(a),r.appendChild(c),r.appendChild(u),r.appendChild(p),r})(t))})),t.appendChild(e)},l=(()=>{const t=document.querySelector("#content");let e=document.createElement("div");e.setAttribute("id","form-container");const o=()=>{e.style.display="none"};return{generateForm:()=>{let i=document.createElement("form"),d=document.createElement("button");d.setAttribute("id","form-exit-button"),d.textContent="x",d.addEventListener("click",o),i.appendChild(d);let r=document.createElement("label");r.setAttribute("for","title-input"),r.textContent="Title";let a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","title-input"),i.appendChild(r),i.appendChild(a);let c=document.createElement("label");c.setAttribute("for","description-input"),c.textContent="Description";let s=document.createElement("textarea");s.setAttribute("id","description-input"),i.appendChild(c),i.appendChild(s);let m=document.createElement("label");m.setAttribute("for","due-date"),m.textContent="Due Date";let u=document.createElement("input");u.setAttribute("id","due-date"),u.setAttribute("type","date"),i.appendChild(m),i.appendChild(u);let p=document.createElement("label");p.setAttribute("for","priority"),p.setAttribute("id","priority-label"),p.textContent="Priority";let h=document.createElement("select");h.setAttribute("id","priority"),h.setAttribute("name","priority");let C=document.createElement("option");C.setAttribute("value","high"),C.textContent="High";let b=document.createElement("option");b.setAttribute("value","medium"),b.textContent="Medium";let E=document.createElement("option");E.setAttribute("value","low"),E.textContent="Low",h.appendChild(C),h.appendChild(b),h.appendChild(E),i.appendChild(p),i.appendChild(h);let g=document.createElement("button");g.setAttribute("type","button"),g.textContent="Add to list",g.addEventListener("click",(()=>{n.addToList(a.value,s.value,u.value,h.value),l.closeForm()})),i.appendChild(g),e.appendChild(i),t.appendChild(e)},launchForm:()=>{e.style.display="block"},closeForm:o}})(),d=(()=>{const t=document.querySelector("#content");let n=document.createElement("div");n.setAttribute("id","project-form-container");const o=()=>{n.style.display="none"};return{generateForm:()=>{let i=document.createElement("form"),l=document.createElement("button");l.setAttribute("id","form-exit-button"),l.textContent="x",l.addEventListener("click",o),i.appendChild(l);let r=document.createElement("label");r.setAttribute("for","name-input"),r.textContent="Project Name";let a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","name-input"),i.appendChild(r),i.appendChild(a);let c=document.createElement("button");c.setAttribute("type","button"),c.textContent="Create project",c.addEventListener("click",(()=>{e.addProject(a.value),console.log(e.getProjects()),d.closeForm()})),i.appendChild(c),n.appendChild(i),t.appendChild(n)},launchForm:()=>{n.style.display="block"},closeForm:o}})(),r=document.querySelector("#content");(()=>{l.generateForm();let t=document.createElement("header"),e=document.createElement("div");e.setAttribute("id","header-container");let n=document.createElement("h1");n.textContent="My To-Dos",e.appendChild(n);let o=document.createElement("button");o.setAttribute("id","add-button"),o.textContent="+",o.addEventListener("click",(()=>{l.launchForm()})),e.appendChild(o),t.appendChild(e),d.generateForm();let i=document.createElement("button");i.setAttribute("id","add-project-button"),i.textContent="+",i.addEventListener("click",(()=>{d.launchForm()})),t.appendChild(i),r.appendChild(t)})(),o(),i()})();